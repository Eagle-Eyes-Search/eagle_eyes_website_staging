<style>
    .feature-highlights {
        display: flex;
        justify-content: space-between;
        max-width: 1000px;
        padding: 20px;
        flex-wrap: wrap;
        margin: 0 auto;
        margin-top: 0;
        padding-top: 0;
        margin-bottom: 50px;
    }
  
    .sub-container {
        flex: 1 1 calc(33.33% - 20px);
        margin: 10px;
        padding: 15px;
        box-sizing: border-box;
        text-align: center;
    }
  
    .sub-container img.icon {
        width: 50px;
        height: auto;
        margin-bottom: 10px;
    }
  
    .sub-container h3 {
        font-weight: bold;
        margin: 10px 0;
    }
  
    .sub-container p {
        margin: 10px 0;
    }
  
    .sub-container:first-child {
        margin-left: 0;
    }
  
    .sub-container:last-child {
        margin-right: 0;
    }
  
    /* Additional styles for the plan table */
    .plan-header, .plan-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
  
    /* Define fixed widths for each column: 5%, 35%, 30%, 30% */
    .plan-header > div:nth-child(1),
    .plan-row > div:nth-child(1) {
        flex: 0 0 5%;
    }
  
    .plan-header > div:nth-child(2),
    .plan-row > div:nth-child(2) {
        flex: 0 0 35%;
    }
  
    .plan-header > div:nth-child(3),
    .plan-row > div:nth-child(3) {
        flex: 0 0 30%;
    }
  
    .plan-header > div:nth-child(4),
    .plan-row > div:nth-child(4) {
        flex: 0 0 30%;
    }
  
    /* For explainer rows, let the container adjust its height */
    .plan-row.explainer {
        position: relative;
        height: auto;
    }
  
    /* Updated: Remove absolute positioning so the text starts at the same left edge 
       as in the other rows, but allow it to expand (overlapping columns 3 and 4 if needed) */
    .plan-row.explainer .column-feature {
        position: relative;
        flex: 0 0 auto; /* Override the fixed 35% width */
        width: auto;
        max-width: none;
        z-index: 1;
    }
  
    /* Ensure content in columns 3 and 4 stays centered */
    .column-android,
    .column-desktop {
        text-align: center;
        position: relative;
        z-index: 2;
    }
</style>



<div class="section-container" id="features">
    <h3 class="pb-40" style="text-align: center">Features</h3>
    <div class="centered-feature bkg-grey-ultralight" style="padding-bottom: 20px;"> 
        <!-- Header row for alignment -->
        <div class="plan-header">
            <div class="column-dropdown"></div>
            <div class="column-feature"></div>
            <div class="column-android"><h4>Eagle Eyes Pilot</h4></div>
            <div class="column-desktop"><h4>Eagle Eyes Scan</h4></div>
        </div>
        <!-- <div class="plan-row">
            <div class="column-dropdown"></div>
            <div class="column-feature"></div>
            <div class="column-android"><h5>All-in-one solution for drone pilots</h5></div>
            <div class="column-desktop"><h5>Powerful aerial image & video analysis</h5></div>
        </div> -->
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle spotlight">+</span></div>
            <div class="column-feature">Drone piloting</div>
            <div class="column-android"><i class="fas fa-check text-success"></i></div>
            <div class="column-desktop"><i class="fas fa-times text-secondary"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Works as a standalone DJI drone piloting app.<br> 
            It is possible to switch between DJI Pilot 2 during flight.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Drone tracking on map</div>
            <div class="column-android"><i class="fas fa-check text-success"></i></div>
            <div class="column-desktop"><i class="fas fa-hourglass-half text-warning"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Live-track the drone on a shared CalTopo map.<br>Requires CalTopo account and internet connection.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Drone photos on map</div>
            <div class="column-android"><i class="fas fa-check text-success"></i></div>
            <div class="column-desktop"><i class="fas fa-hourglass-half text-warning"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Add waypoints and images to a CalTopo map in real-time during flight<br>Requires CalTopo account and internet connection.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Live streaming</div>
            <div class="column-android"><i class="fas fa-hourglass-half text-warning"></i></div>
            <div class="column-desktop"><i class="fas fa-check text-success"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Run the detection system on a live drone video feed.<br> 
            Pause live streams at any time and go back in time to revisit footage.<br>
            Monitor live folders for new images as they are captured.<br>
            Optional cloud streaming via third-party video conferencing.<br>
            Note: Live streaming requires HDMI-out on controller and HDMI capture card.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Color anomaly detection</div>
            <div class="column-android"><i class="fas fa-check text-success"></i></div>
            <div class="column-desktop"><i class="fas fa-check text-success"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Detects and highlights anomalies of any color not fitting in the background.<br>
            Can highlight small non-natural objects that humans might miss. Optimized for remote settings.<br>
            Note: May produce false positives (e.g., brightly colored debris) and false negatives (e.g., camouflaged objects).<br>
            High-speed or high-altitude flights reduce detection accuracy.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Motion anomaly detection</div>
            <div class="column-android"><i class="fas fa-check text-success"></i></div>
            <div class="column-desktop"><i class="fas fa-check text-success"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Detects and highlights moving objects while the drone is hovering in place.<br>
            Can highlight small motion anomalies in footage that humans might miss.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Thermal + optical side-by-side</div>
            <div class="column-android"><i class="fas fa-check text-success"></i></div>
            <div class="column-desktop"><i class="fas fa-check text-success"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Shows thermal and optical video side by side on the same display.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Offline mode</div>
            <div class="column-android"><i class="fas fa-check text-success"></i></div>
            <div class="column-desktop"><i class="fas fa-check text-success"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Machine-locked licenses and offline processing remove dependency on online connectivity.<br>
            Please note: Using CalTopo integration features requires internet connectivity.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Advanced inspection tools</div>
            <div class="column-android"><i class="fas fa-times text-secondary"></i></div>
            <div class="column-desktop"><i class="fas fa-check text-success"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Quickly navigate and inspect detections, sorted by uniqueness or closeness to a preset color.<br>
            Review live or pre-recorded footage with zoom, pause, and replay.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">File organization</div>
            <div class="column-android"><i class="fas fa-times text-secondary"></i></div>
            <div class="column-desktop"><i class="fas fa-check text-success"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Organize your videos and images in case files.<br>
            Sync recordings from your drone's SD card to your laptop.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <div class="plan-row">
            <div class="column-dropdown"><span class="toggle">+</span></div>
            <div class="column-feature">Reports & exports</div>
            <div class="column-android"><i class="fas fa-times text-secondary"></i></div>
            <div class="column-desktop"><i class="fas fa-check text-success"></i></div>
        </div>
        <div class="plan-row explainer" hidden>
            <div class="column-dropdown"></div>
            <div class="column-feature">
            <i>Create a pdf report of drone flight paths and images and locations of objects of interest.<br>
            Export flight paths and locations of objects of interests in KML or CSV for use in other tools.</i>
            </div>
            <div class="column-android"></div>
            <div class="column-desktop"></div>
        </div>
        <p></p>
        <div class="fas fa-hourglass-half" style="text-align: center"><i> = feature in development</i></div>
    </div>
    <br>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize the explainer rows to be hidden by default
        document.querySelectorAll('.explainer').forEach(explainer => {
            explainer.style.display = 'none';
        });

        // Automatically open the first feature if spotlight exists
        const spotlight = document.querySelector('.spotlight');
        if (spotlight) {
            const firstExplainer = spotlight.closest('.plan-row').nextElementSibling;
            if (firstExplainer && firstExplainer.classList.contains('explainer')) {
                firstExplainer.style.display = 'flex';
                spotlight.textContent = '−';
            }
        }

        // Add click event listener to all toggles
        document.querySelectorAll('.toggle').forEach(toggle => {
            toggle.addEventListener('click', function() {
                const isActive = this.textContent === '−';
                
                // Close all explainers and reset toggles
                document.querySelectorAll('.explainer').forEach(explainer => {
                    explainer.style.display = 'none';
                });
                document.querySelectorAll('.toggle').forEach(toggle => {
                    toggle.textContent = '+';
                });

                // Open the clicked explainer if it was not already active
                if (!isActive) {
                    const explainer = this.closest('.plan-row').nextElementSibling;
                    if (explainer && explainer.classList.contains('explainer')) {
                        explainer.style.display = 'flex';
                        this.textContent = '−';
                    }
                }
            });
        });
    });
</script>
