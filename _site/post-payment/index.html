<!DOCTYPE html>
<html>


<head>
	<meta charset="UTF-8" />
	<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0" name="viewport">

	<!-- Open Graph -->
	<meta property="og:title" content="Eagle Eyes" />
	<meta property="og:url" content="https://www.eagleeyessearch.com/" />
	<meta property="og:type" content="website" />
	<meta property="og:image" content="https://eagleeyessearch.com/images/eagle_eyes_logo_2.png" />
	<meta property="og:description" content="The Future of Aerial Search" />

	<!-- Twitter Theme -->
	<meta name="twitter:widgets:theme" content="light">
	
	<!-- Title &amp; Favicon -->
	<title>Eagle Eyes Search</title>
	<link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
	<link rel="manifest" href="images/favicon/site.webmanifest">
	<link rel="mask-icon" href="images/favicon/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">

	<!-- Font -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700%7CHind+Madurai:400,500&amp;subset=latin-ext" rel="stylesheet">
	
	<!-- Css -->
	<link rel="stylesheet" href="css/core.min.css" />
	<link rel="stylesheet" href="css/skin.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
	<link rel="shortcut icon" type="image/png" href="images/eagle_eyes_icon_rounded_filtered.png">
	<link rel="stylesheet" href="css/custom-styling.css" />

    <style>
        .content-grid-3 {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>

	<!--[if lt IE 9]>
    	<script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	
	<!-- Enable Fathom -->
	<script src="https://cdn.usefathom.com/script.js" data-site="QAODRYUQ" defer></script>
	
	<!-- Hotjar Tracking Code for Site 5045439 (name missing) -->
	<script>
		(function(h,o,t,j,a,r){
			h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
			h._hjSettings={hjid:5045439,hjsv:6};
			a=o.getElementsByTagName('head')[0];
			r=o.createElement('script');r.async=1;
			r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
			a.appendChild(r);
		})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
	</script>
	<script>
	$(document).ready(function() {
		$('nav.overlay-navigation a').click(function() {
			$('.overlay-navigation-wrapper').hide(); // this will hide the element
			$('body').css('overflow', 'auto');
			$('html').css('overflow', 'auto');
			$('body').removeClass('no-scroll');
			$('html').removeClass('no-scroll');
			// Hacky stuff
			// or
			//$('.v-align-middle').removeClass('v-align-middle'); // this will remove the class
		});
	});
	</script>

</head>

<head>
  <!-- Add necessary meta tags and other head elements here -->

  <style>
    .banner {
      position: relative;
      height: 100px; /* Adjust as needed */
      width: 100%;
      overflow: hidden; /* to contain the pseudo element */
    }
  
    .banner::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: url('/images/eagle_eyes_website_header_bg.jpg') no-repeat center;
      background-size: cover;
      filter: brightness(50%);
      z-index: 1; /* to ensure it's below other content */
    }
  
    .banner-text, .banner-img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2; /* to ensure it's above the background */
    }
   .banner-link img {
      width: 100px; /* adjust as per requirement */
      height: 50px;
       align-content: flex-start;
       z-index: 2;
       position: absolute;
       top: 20%;
    }
  
    /* Modern looking font */
    .lead {
      width: 80%;
      margin: auto;
      font: 1.2em/1.5em "Hind Madurai", sans-serif;
    }
    </style>
</head>

<body class="shop home-page">
  <div class="banner">
    <a class="banner-link" href="/">
      <img src="/images/back_to_eagleeyes.png"/>
    </a>
    <!-- <div class="banner-text">Eagle Eyes Scan</div> -->
    <img class="banner-img" src="/images/eagle_eyes_flat_logo_2.png" style="width:30%"/>
  </div>
    
  <section class="content evensection">
      <div class="lead">
        <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Status</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style src="/css/form_buttons_and_boxes.css"></style>
    <link rel="stylesheet" href="/css/form_buttons_and_boxes.css">

    <!-- Import shared.js from root of this site -->
    <script src="/shared.js"></script>
    <script>

        $(document).ready(function() {
            var urlParams = new URLSearchParams(window.location.search);
            console.log(urlParams);
            var status = urlParams.get('status');
            var licenseId = urlParams.get('license_id');
            var machineId = urlParams.get('machine_id');
            var email = urlParams.get('email', null);
            var isEmulator = getIsEmulatorFromURL(window.location.search);
            hostURL = isEmulator ? 'http://127.0.0.1:5001/eagleeyessearch/us-central1' : 'https://us-central1-eagleeyessearch.cloudfunctions.net'

            console.log(`Payment status: ${status}, isEmulator: ${isEmulator}, licenseId: ${licenseId}, machineId: ${machineId}, hostURL: ${hostURL}`);

            var returnUrl = `/get-license/?early_adopter=false&machine_id=${machineId || ''}${licenseId ? '&license_id=' + licenseId : ''}${isEmulator ? '&is_emulator=' + isEmulator : ''}`;
            $('#return-button').attr('href', returnUrl);

            if (status === 'success') {
                $('#message').text('Payment Success');
                $('#details').text(`Your payment for License ${licenseId} has been successfully processed. Thank you for your purchase! You should soon have an email confirming your receipt of this license.  This code can be used to request keys from your license, so keep it within your team.`);
                if (licenseId) {
                    // $('#license-info').text('Your license id is ' + licenseId);
                    confirmLicense(licenseId);
                    
                }
            } else if (status === 'cancelled') {
                $('#message').text('Payment Cancelled');
                $('#details').text('Your payment was not completed. If this was an error, please try again.');
            }

            function confirmLicense(licenseId) {
                console.log(`Confirming license ${licenseId} in database`);

                // url = hostURL + "/confirm_license_in_database?license_id=" + licenseId;
                $('#status').show().text('⏳ Confirming license in database...');
                url = `${hostURL}/confirm_license_in_database?license_id=${licenseId}&email=${email}`;
                console.log(`URL: ${url}`);
                $.ajax({
                    url: url,
                    type: "POST",
                    data: {license_id: licenseId},
                    success: function(response) {
                        // $('.info-box').show().text('License confirmed: ' + response.license.name);
                        $('#status').addClass('info-box').show().text("✅ "+response);
                        if (machineId) {
                            $('#return-button').text('Activate License for this Machine');
                        } else {
                            $('#return-button').text('View Your Licenses');
                        }
                    },
                    error: function(xhr) {
                        // $('.error-box').show().text('Error: ' + xhr.responseText);
                        $('#status').addClass('error-box').show().text(`❌ ${xhr.responseText}`);
                        $('#return-button').text('Back to Licenses Page');
                    }
                });
            }
        });
    </script>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1 id="message">Loading...</h1>
            <p id="details"></p>
            <p id="license-info"></p>
            <div id="status" style="display:none;"></div>
            <br/><br/>
            <a href="#" id="return-button" class="btn btn-primary">Return to Licensing Page</a>
            <br/><br/>
            If you have any questions, please contact us at <a href="mailto:info@eagleeyessearch.com">info@eagleeyessearch.com</a>
        </div>
    </div>
</div>
</body>
</html>

      </div>
  </section>
  
</body>
</html>
