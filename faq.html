---
layout: main
title: FAQ - Eagle Eyes
permalink: /faq/
---

<!-- Content -->
<div class="content clearfix reveal-footer">
    <!-- Page Header -->
    <div class="section-block bkg-grey-ultralight" style="padding: 100px 0 30px 0;">
        <div class="row">
            <div class="column width-10 offset-1 center">
                <div style="position: relative; height: 90px; margin-bottom: 20px;">
                    <div style="position: absolute; font-size: 5.5rem; line-height: 1; color: #1e90ff; transform: rotate(20deg); left: 48%; top: 0;">   ü¶Ö   </div>
                    <div style="position: absolute; font-size: 4rem; line-height: 1; color: #1e90ff; left: 46%; top: 65px;">‚ùì   </div>
                </div>
                <h1 class="mb-10">Frequently Asked Questions</h1>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <section class="section-block pt-30 pb-90 bkg-white">
        <div class="row">
            <div class="column width-8 offset-2">
                <!-- FAQ Search -->
                <div class="faq-search" role="search" aria-label="Search FAQs">
                    <input id="faq-search-input" type="search" placeholder="Search FAQs..." aria-label="Search FAQs" />
                    <div id="faq-search-meta" class="faq-search-meta" aria-live="polite"></div>
                </div>
                <div class="faq-container">
                    <!-- FAQ Items -->
                    <div class="faq-item" id="pricing">
                        <div class="faq-question">
                            <span class="faq-question-text">üí∏ What are the pricing options?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('pricing'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <p>View our full <a href="{{ '/pricing/' | relative_url }}" class="resource-link" target="_blank">pricing page</a> for detailed information.</p>
                            
                            <p>In addition to our Pro (paid) plans, Eagle Eyes Pilot is also available for free. Anyone can download Eagle Eyes Pilot onto their drone controller or Android device without need for verification and access several useful features at no cost. For details, see our <a href="{{ '/pricing/' | relative_url }}" class="resource-link" target="_blank">pricing page</a>.</p>
                            
                            <p><em>All prices are in USD for an annual subscription. No auto-renewals</em></p>
                            
                            <div style="margin: 20px 0; padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
                                <h4 style="margin-bottom: 15px; color: #333;">Pricing Structure:</h4>
                                <ul style="margin: 0; padding-left: 20px; color: #555;">
                                    <li><strong>Free Trial:</strong> 30 days, no credit card required</li>
                                    <li><strong>USD $400 for 1st device</strong></li>
                                    <li><strong>+USD $150 per additional device</strong></li>
                                    <li><strong>10+ Devices:</strong> Custom pricing with enterprise support</li>
                                </ul>
                            </div>

                            <p><em>* A verified account is required to purchase a license. Account verification can take 1-3 business days.</em></p>
                            <p><em>* A purchased license can be used on any supported device (<a href="https://docs.google.com/document/d/1Uq8lHS-V7B7ekQ9h6gRrnnclu9vuM4zKRBzB3tS0fGQ/edit?tab=t.0#bookmark=kix.z1er5rw35wkp" class="resource-link" target="_blank">Pilot</a> or <a href="https://docs.google.com/document/d/12mhRVmhtQUfvJHy7tI7mB_oLd3aRqYJJPWzKlhKnTwY/edit?tab=t.0#bookmark=id.uix6wbgvbsgd" class="resource-link" target="_blank">Scan</a>). Once a device is activated using a license, the device becomes permanently linked to that license and cannot be replaced with a different device. If you need to switch your license to a different device please contact <span class="faq-email-link" onclick="copyEmailToClipboard()" style="color: #1e90ff; cursor: pointer; text-decoration: underline; font-weight: 500;">info@EagleEyesSearch.com</span>.</em></p>
                        </div>
                    </div>

                    <div class="faq-item" id="free-trial">
                        <div class="faq-question">
                            <span class="faq-question-text">‚≠ê Is there a free trial available?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('free-trial'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <p>Yes, we offer a 30-day free trial of the SAR license. You can <a href="{{ '/pricing/' | relative_url }}" class="resource-link" target="_blank">request a trial here</a>.</p>
                        </div>
                    </div>

                    <div class="faq-item" id="beta-stable-same-device">
                        <div class="faq-question">
                            <span class="faq-question-text">üöß Can I run the Beta version and the Stable version on the same device under one license (not use two license keys)?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('beta-stable-same-device'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                            
                            <p>At Eagle Eyes, we release Beta versions early to gather real-world feedback and accelerate improvements, though bugs are expected. For mission-critical work, we recommend having both installed. If the Beta causes issues, you can easily switch back to the Stable version.</p>
                        </div>
                    </div>

                    <div class="faq-item" id="share-license">
                        <div class="faq-question">
                            <span class="faq-question-text">üì§ Can I share my license with others?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('share-license'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="system-requirements">
                        <div class="faq-question">
                            <span class="faq-question-text">üíª What hardware/system requirements are needed for Eagle Eyes?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('system-requirements'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="what-is-pilot">
                        <div class="faq-question">
                            <span class="faq-question-text">ü¶Ö What is Eagle Eyes Pilot?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('what-is-pilot'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="livestreaming">
                        <div class="faq-question">
                            <span class="faq-question-text">‚õΩ How does livestreaming work with Eagle Eyes?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('livestreaming'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="pilot-vs-scan">
                        <div class="faq-question">
                            <span class="faq-question-text">‚ö° How do I Use Eagle Eyes Pilot and Scan together?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('pilot-vs-scan'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                    </div>

                    <div class="faq-item" id="dji-apps-realtime">
                        <div class="faq-question">
                            <span class="faq-question-text">üîÑ Can I fly my drone with the DJI app and run Eagle Eyes Detector at the same time?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('dji-apps-realtime'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                    </div>

                    <div class="faq-item" id="other-pilot-apps-overlays">
                        <div class="faq-question">
                            <span class="faq-question-text">üß© Can I use Eagle Eyes with other pilot apps or display overlays?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('other-pilot-apps-overlays'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="switch-apps-midflight">
                        <div class="faq-question">
                            <span class="faq-question-text">üîÄ Can I switch from my DJI drone app to Eagle Eyes Pilot and back midflight?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('switch-apps-midflight'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                    </div>

                    <div class="faq-item" id="accessing-telemetry-display">
                        <div class="faq-question">
                            <span class="faq-question-text">üõ∞Ô∏è How do I access the drone telemetry display in Eagle Eyes Pilot?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('accessing-telemetry-display'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>


                    <div class="faq-item" id="mac-ios-support">
                        <div class="faq-question">
                            <span class="faq-question-text">üçé Does Eagle Eyes Scan run on Mac or iOS?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('mac-ios-support'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="offline-support">
                        <div class="faq-question">
                            <span class="faq-question-text">üåê Does the software work offline?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('offline-support'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="dji-pilot-gps-tracking">
                        <div class="faq-question">
                            <span class="faq-question-text">üìπ How to make sure the drone GPS location data is recorded with videos in DJI Pilot 2?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('dji-pilot-gps-tracking'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="compatibility-overview">
                        <div class="faq-question">
                            <span class="faq-question-text">üîß What drones, controllers, mobile devices and/or computers is Eagle Eyes compatible with?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('compatibility-overview'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="thermal-detection">
                        <div class="faq-question">
                            <span class="faq-question-text">üî• Does the detector work with thermal footage?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('thermal-detection'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                    </div>

                    <div class="faq-item" id="detector-modes">
                        <div class="faq-question">
                            <span class="faq-question-text">üî≠ What is the difference between the different detector modes?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('detector-modes'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="review-detections">
                        <div class="faq-question">
                            <span class="faq-question-text">üïµÔ∏è How do I review detections in Eagle Eyes?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('review-detections'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="how-detector-works">
                        <div class="faq-question">
                            <span class="faq-question-text">ü§ñ How does the detector work?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('how-detector-works'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                    </div>

                    <div class="faq-item" id="detection-coordinates">
                        <div class="faq-question">
                            <span class="faq-question-text">üåç How do I get coordinates for detections in Eagle Eyes Scan?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('detection-coordinates'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                    </div>

                    <div class="faq-item" id="gimbal-recalibration">
                        <div class="faq-question">
                            <span class="faq-question-text">üéØ How do I recalibrate or re-center the gimbal in Eagle Eyes Pilot?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('gimbal-recalibration'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="share-feedback">
                        <div class="faq-question">
                            <span class="faq-question-text">üìù How do I share feedback, footage, or report detector errors to help improve the Eagle Eyes detector?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('share-feedback'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="capture-photos">
                        <div class="faq-question">
                            <span class="faq-question-text">üì∑ Can I run the detector on full-res drone photos and add those full-res photos to Caltopo while the drone is still in the air?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('capture-photos'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                    </div>


                    <div class="faq-item" id="controller-setup">
                        <div class="faq-question">
                            <span class="faq-question-text">üéÆ How do I set up Eagle Eyes on my drone controller?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('controller-setup'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="activate-scan-license">
                        <div class="faq-question">
                            <span class="faq-question-text">üîë How do I activate my license for Eagle Eyes Scan on my desktop/laptop computer?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('activate-scan-license'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="connect-caltopo">
                        <div class="faq-question">
                            <span class="faq-question-text">üó∫Ô∏è How do I connect to Caltopo?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('connect-caltopo'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="offline-tracks-upload">
                        <div class="faq-question">
                            <span class="faq-question-text">üì¥ Can I fly my drone offline and upload my drone's tracks to CalTopo?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('offline-tracks-upload'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                    </div>

                    <div class="faq-item" id="drop-marker-pilot">
                        <div class="faq-question">
                            <span class="faq-question-text">üìç How to drop a marker in Eagle Eyes Pilot and use it as a reference for returning to an area after a battery swap?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('drop-marker-pilot'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="app-store">
                        <div class="faq-question">
                            <span class="faq-question-text">üõí  Is Eagle Eyes available on the iOS App Store or Google Play?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('app-store'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>

                    <div class="faq-item" id="privacy">
                        <div class="faq-question">
                            <span class="faq-question-text">üîí What is Eagle Eyes' privacy and data security policy?</span>
                            <div class="faq-actions">
                                <span class="toggle-icon">+</span>
                                <button class="faq-share-btn" onclick="event.stopPropagation(); shareFaqQuestion('privacy'); return false;" title="Share this FAQ">
                                </button>
                            </div>
                        
                        </div>
                </div>

                <!-- Contact Section -->
                <div class="faq-contact-section" style="margin-top: 40px; padding: 30px; background: linear-gradient(135deg, #f8f9fa 0%, #e3f2fd 100%); border-radius: 12px; text-align: center; border: 1px solid #e9ecef;">
                    <h3 style="margin-bottom: 15px; color: #333; font-size: 1.8rem; font-weight: 600;">Is your question not answered here?</h3>
                    <p style="margin-bottom: 20px; color: #555; font-size: 1.1rem; line-height: 1.5;">
                        Contact us at 
                        <span class="faq-email-link" onclick="copyEmailToClipboard()" style="color: #1e90ff; cursor: pointer; text-decoration: underline; font-weight: 500; transition: all 0.3s ease; padding: 4px 8px; border-radius: 4px; display: inline-block;" 
                             onmouseover="this.style.backgroundColor='#1e90ff'; this.style.color='white';" 
                             onmouseout="this.style.backgroundColor='transparent'; this.style.color='#1e90ff';">
                            info@EagleEyesSearch.com
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </section>

    {% include footer.html %}
</div>

<!-- Js -->
<!-- These scripts are already included in the main layout, so remove them -->
<!-- <script src="js/jquery-3.2.1.min.js"></script>
<script src="js/jquery.tm.avalanche.js"></script>
<script src="js/timber.master.min.js"></script> -->

<!-- MiniSearch Library for BM25 -->
<script src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js"></script>

<!-- FAQ Toggle Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const faqQuestions = document.querySelectorAll('.faq-question');
    
    // Function to open a specific FAQ item (without scrolling the page)
    function openFaqItem(faqItem) {
        // Close all other FAQ items first
        faqQuestions.forEach(otherQuestion => {
            otherQuestion.parentNode.classList.remove('active');
        });
        
        // Open the specified item
        faqItem.classList.add('active');
        // Do not scroll the page; let content expand in place
    }

    // Function to pause all videos in a FAQ item
    function pauseVideosInFaqItem(faqItem) {
        const videos = faqItem.querySelectorAll('iframe');
        videos.forEach(video => {
            // For YouTube videos - use postMessage to pause
            if (video.src.includes('youtube.com')) {
                try {
                    video.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                } catch (e) {
                    // If postMessage fails, reload the video
                    const currentSrc = video.src;
                    video.src = '';
                    video.src = currentSrc;
                }
            }
            // For Streamable videos - reload to stop playback
            else if (video.src.includes('streamable.com')) {
                const currentSrc = video.src;
                video.src = '';
                video.src = currentSrc;
            }
        });
    }

    // Handle click events on FAQ questions
    faqQuestions.forEach(question => {
        question.addEventListener('click', function() {
            const parent = this.parentNode;
            if (!parent.classList.contains('active')) {
                openFaqItem(parent);
                // Update URL hash without triggering scroll
                const id = parent.getAttribute('id');
                history.pushState(null, null, `#${id}`);
            } else {
                // Pause videos before closing
                pauseVideosInFaqItem(parent);
                parent.classList.remove('active');
                history.pushState(null, null, window.location.pathname);
            }
        });
    });

    // Handle initial load and hash changes
    function handleHash() {
        const hash = window.location.hash.substring(1);
        if (hash) {
            const targetFaq = document.getElementById(hash);
            if (targetFaq) {
                openFaqItem(targetFaq);
            }
        }
    }

    // Handle hash changes
    window.addEventListener('hashchange', handleHash);

    // Handle initial load
    handleHash();

    // ============================================================
    // FAQ SEARCH SYSTEM - MiniSearch with BM25 Ranking
    // ============================================================
    // When adding new FAQs: Scroll down ~50 lines to the metadata
    // section and add alternates + tags for optimal search ranking!
    // Search the file for: "IMPORTANT: When adding NEW FAQs"
    // ============================================================
    
    const searchInput = document.getElementById('faq-search-input');
    const searchMeta = document.getElementById('faq-search-meta');
    const faqItems = Array.from(document.querySelectorAll('.faq-item'));

    // Stopwords to remove from queries
    const stopwords = new Set([
        'the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for',
        'of', 'with', 'by', 'from', 'is', 'are', 'was', 'were', 'be', 'been',
        'can', 'could', 'do', 'does', 'did', 'has', 'have', 'had',
        'how', 'what', 'when', 'where', 'why', 'who', 'which',
        'i', 'my', 'me', 'we', 'you', 'your',
        'if', 'so', 'than', 'that', 'this', 'these', 'those',
        'will', 'would', 'should', 'there', 'their',
        'dont', 'doesnt', 'didnt', 'wont', 'wouldnt', 'shouldnt', 'cant', 'couldnt',
        'it', 'its', 'am', 'not'
    ]);

    // Concept groups for query expansion
    const concepts = {
        connectivity: ['wifi', 'internet', 'network', 'offline', 'online', 'signal'],
        licensing: ['license', 'key', 'activate', 'activation', 'unlock', 'register', 'trial'],
        hardware: ['drone', 'controller', 'remote', 'dji', 'computer', 'laptop'],
        setup: ['install', 'setup', 'download', 'configure'],
        detection: ['detect', 'detector', 'detection', 'vision', 'ai'],
        compatibility: ['compatible', 'support', 'works', 'requirements'],
        versions: ['beta', 'stable', 'version', 'release']
    };

    // Build reverse map
    const termToConcepts = {};
    Object.keys(concepts).forEach(conceptName => {
        concepts[conceptName].forEach(term => {
            if (!termToConcepts[term]) termToConcepts[term] = [];
            termToConcepts[term].push(conceptName);
        });
    });

    // Structure FAQ data with metadata
    const faqData = faqItems.map((item, idx) => {
        const id = item.getAttribute('id') || `faq-${idx}`;
        const questionEl = item.querySelector('.faq-question');
        const answerEl = item.querySelector('.faq-answer');
        const questionText = (questionEl ? questionEl.textContent : '').trim();
        const answerText = (answerEl ? answerEl.textContent : '').trim();
        
        // ============================================================
        // IMPORTANT: When adding NEW FAQs, add metadata here for optimal search!
        // ============================================================
        // 
        // For each new FAQ, add an entry below with:
        //
        // ALTERNATES: 2-4 common ways users might ask this question
        //   - Use natural language variations (5-10 words)
        //   - Think: "How else would someone search for this?"
        //   - Example: "unlock scan desktop laptop computer machine id"
        //
        // TAGS: 3-8 key concepts/keywords from the FAQ
        //   - Single words or short 2-word phrases
        //   - Include product names, technical terms, action words
        //   - Example: "license key activation desktop laptop"
        //
        // TEMPLATE:
        // } else if (id === 'your-faq-id') {
        //     alternates = 'phrase one phrase two phrase three';
        //     tags = 'keyword1 keyword2 keyword3 keyword4';
        // }
        //
        // NOTE: FAQs without metadata still work but may rank lower!
        // ============================================================
        
        let alternates = '';
        let tags = '';
        
        if (id === 'beta-stable-same-device') {
            alternates = 'run two versions same device multiple versions';
            tags = 'beta stable yellow blue logo dual install';
        } else if (id === 'activate-scan-license') {
            alternates = 'unlock scan desktop laptop computer machine id';
            tags = 'license key activation desktop laptop';
        } else if (id === 'other-pilot-apps-overlays') {
            alternates = 'third party apps hdmi input other software';
            tags = 'hdmi overlay bounding box pilot apps';
        } else if (id === 'offline-support') {
            alternates = 'no wifi no internet no connection no signal';
            tags = 'offline network wifi internet connectivity';
        } else if (id === 'pricing') {
            alternates = 'cost price how much money';
            tags = 'pricing cost trial';
        } else if (id === 'compatibility-overview') {
            alternates = 'what drones supported drone types which drones work models';
            tags = 'compatibility drone types models supported dji mavic';
        } else if (id === 'offline-tracks-upload') {
            alternates = 'no wifi no internet upload tracks later recorded flight logs offline maps';
            tags = 'offline tracks upload caltopo gps flight logs mbtiles maps free';
        }
        
        return {
            id,
            item,
            question: questionText,
            alternates,
            tags,
            answer: answerText.substring(0, 500) // Limit answer length for indexing
        };
    });

    // Initialize MiniSearch with BM25
    const miniSearch = new MiniSearch({
        fields: ['question', 'alternates', 'tags', 'answer'],
        storeFields: ['id'],
        searchOptions: {
            boost: { question: 3, alternates: 2, tags: 2, answer: 1 },
            fuzzy: 0.2,
            prefix: true
        }
    });

    // Add documents to index
    miniSearch.addAll(faqData);

    // Expand query with concepts (conservative)
    function expandQuery(queryText) {
        const tokens = queryText.toLowerCase().split(/\s+/).filter(Boolean);
        
        // FIRST: Remove stopwords
        const meaningfulTokens = tokens.filter(t => !stopwords.has(t));
        
        // If no meaningful tokens, return empty (don't search stopwords)
        if (meaningfulTokens.length === 0) {
            return '';
        }
        
        const expanded = new Set(meaningfulTokens);
        
        // THEN: Expand with concepts
        meaningfulTokens.forEach(token => {
            if (termToConcepts[token]) {
                // Add only the first matched concept's terms (not all)
                const firstConcept = termToConcepts[token][0];
                concepts[firstConcept].forEach(term => expanded.add(term));
            }
        });
        
        return Array.from(expanded).join(' ');
    }

    function renderResults(query) {
        const q = (query || '').trim();
        history.replaceState(null, null, window.location.pathname);

        if (q.length === 0) {
            faqData.forEach(({ item }) => item.style.display = '');
            searchMeta.textContent = '';
            return;
        }

        // Expand query with concepts (also filters stopwords)
        const expandedQuery = expandQuery(q);
        
        // If query is all stopwords, show all FAQs
        if (expandedQuery.length === 0) {
            faqData.forEach(({ item }) => item.style.display = '');
            searchMeta.textContent = 'Search for specific terms (common words filtered)';
            return;
        }
        
        // Search with MiniSearch BM25
        const results = miniSearch.search(expandedQuery, { 
            boost: { question: 3, alternates: 2, tags: 2, answer: 1 }
        });

        // Create a map of id -> rank for sorting
        const idToRank = {};
        results.forEach((r, idx) => {
            idToRank[r.id] = idx;
        });

        const resultIds = new Set(results.map(r => r.id));
        
        // Sort FAQ items by BM25 rank
        const sortedFaqData = [...faqData].sort((a, b) => {
            const aHasResult = resultIds.has(a.id);
            const bHasResult = resultIds.has(b.id);
            
            if (!aHasResult && !bHasResult) return 0;
            if (!aHasResult) return 1;
            if (!bHasResult) return -1;
            
            // Both have results - sort by BM25 rank
            return idToRank[a.id] - idToRank[b.id];
        });
        
        // Update display in sorted order
        const container = document.querySelector('.faq-container');
        sortedFaqData.forEach(({ id, item }) => {
            item.classList.remove('active');
            item.style.display = resultIds.has(id) ? '' : 'none';
            // Re-append to reorder in DOM
            if (resultIds.has(id)) {
                container.appendChild(item);
            }
        });

        if (results.length === 0) {
            searchMeta.innerHTML = `We're updating our FAQ resources and don't have an answer available for your specific question at this time. Please reach out to <span class="faq-email-link" onclick="copyEmailToClipboard()" style="color: #1e90ff; cursor: pointer; text-decoration: underline; font-weight: 500;">info@EagleEyesSearch.com</span> with your question and we'll get back to you with an answer.`;
        } else {
            searchMeta.textContent = `${results.length} result${results.length === 1 ? '' : 's'} for "${q}"`;
        }
    }

    // Debounce for smoother typing
    function debounce(func, wait) {
        let timeout;
        return function(...args) {
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(this, args), wait);
        };
    }

    // Check for query parameter in URL on page load
    function checkUrlQuery() {
        const urlParams = new URLSearchParams(window.location.search);
        const queryParam = urlParams.get('query');
        
        if (queryParam && searchInput) {
            // Set the search input value
            searchInput.value = queryParam;
            // Trigger search immediately (no debounce on initial load)
            renderResults(queryParam);
            // Scroll to search bar
            searchInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }

    if (searchInput) {
        const debouncedSearch = debounce((value) => renderResults(value), 150);
        searchInput.addEventListener('input', (e) => debouncedSearch(e.target.value));
        
        // Check for URL query parameter on page load
        checkUrlQuery();
    }

    // FAQ Share Function - moved outside DOMContentLoaded to be globally accessible
    window.shareFaqQuestion = function(faqId) {
        // Prevent the click from bubbling up to the FAQ question
        event.stopPropagation();
        event.preventDefault();
        
        // Generate the correct URL format
        const faqUrl = `https://www.eagleeyessearch.com/faq/#${faqId}`;
        
        // ALWAYS copy to clipboard on desktop - disable Web Share API completely
        copyToClipboard(faqUrl);
    }

    function copyToClipboard(text) {
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(text).then(() => {
                showCopyNotification();
            }).catch(err => {
                console.log('Clipboard API failed:', err);
                fallbackCopyToClipboard(text);
            });
        } else {
            fallbackCopyToClipboard(text);
        }
    }

    function fallbackCopyToClipboard(text) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        try {
            const success = document.execCommand('copy');
            if (success) {
                showCopyNotification();
            }
        } catch (err) {
            console.log('Fallback copy failed:', err);
        }
        
        document.body.removeChild(textArea);
    }

    function showCopyNotification() {
        // Create notification element
        const notification = document.createElement('div');
        notification.textContent = 'Link copied to clipboard!';
        notification.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1e90ff;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            z-index: 10000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: slideIn 0.3s ease-out;
        `;
        
        // Add animation keyframes
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
                to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
        
        document.body.appendChild(notification);
        
        // Remove notification after 3 seconds
        setTimeout(() => {
            notification.style.animation = 'slideIn 0.3s ease-out reverse';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }

});
</script>

<!-- Email Copy Functions -->
<script>
// Email Copy Function
window.copyEmailToClipboard = function() {
    const email = 'info@EagleEyesSearch.com';
    
    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(email).then(() => {
            showEmailCopyNotification();
        }).catch(err => {
            console.log('Clipboard API failed:', err);
            fallbackCopyEmailToClipboard(email);
        });
    } else {
        fallbackCopyEmailToClipboard(email);
    }
}

function fallbackCopyEmailToClipboard(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.left = '-999999px';
    textArea.style.top = '-999999px';
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    
    try {
        document.execCommand('copy');
        showEmailCopyNotification();
    } catch (err) {
        console.log('Fallback copy failed:', err);
    }
    
    document.body.removeChild(textArea);
}

function showEmailCopyNotification() {
    // Create notification element
    const notification = document.createElement('div');
    notification.textContent = 'Email copied to clipboard!';
    notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #1e90ff;
        color: white;
        padding: 12px 20px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        animation: slideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(notification);
    
    // Remove notification after 3 seconds
    setTimeout(() => {
        notification.style.animation = 'slideIn 0.3s ease-out reverse';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    }, 3000);
}
</script>

<!-- FAQ Styling -->
<style>
.faq-container {
    width: 100%;
}

.faq-item {
    margin-bottom: 0;
    border-bottom: 1px solid #f0f0f0;
    position: relative;
}

.faq-question {
    background-color: #fff;
    padding: 15px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
}

.faq-question-text {
    flex: 1;
    margin-right: 15px;
}

.faq-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.faq-question-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.faq-share-container {
    display: none !important;
}

.faq-share-btn {
    background: transparent;
    color: #666;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 6px 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    height: 32px;
}

.faq-share-btn::before {
    content: "";
    display: block;
    width: 16px;
    height: 16px;
    background-image: url('{{ "/images/share_icon.png" | relative_url }}');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

.faq-share-btn:hover {
    background: #f8f9fa;
    border-color: #bbb;
    color: #333;
}

.faq-share-btn:active {
    background: #e9ecef;
}

/* Removed conflicting icon CSS */

.faq-question:hover {
    color: #1e90ff;
}

.toggle-icon {
    font-size: 18px;
    font-weight: bold;
    color: #999;
    transition: all 0.3s ease;
}

.faq-item.active .toggle-icon {
    transform: rotate(45deg);
    color: #1e90ff;
}

.faq-answer {
    display: none;
    padding: 0 15px 20px 15px;
    background-color: #fff;
    border-top: none;
}

.faq-item.active .faq-answer {
    display: block;
}

/* FAQ Search */
.faq-search {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin: 10px 0 25px;
}

#faq-search-input {
    width: 100%;
    max-width: 640px;
    padding: 12px 14px;
    border: 1px solid #e2e2e2;
    border-radius: 8px;
    font-size: 16px;
}

.faq-search-meta {
    color: #666;
    font-size: 14px;
    text-align: center;
}
</style> 
