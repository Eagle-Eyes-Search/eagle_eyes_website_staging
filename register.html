---
layout: ee_page_layout
title: Register for Eagle Eyes Scan SAR
permalink: /register/
---

<!--
To do:
- Create a request_handler named "submit_register_form" inspired by "generate_download_link" that makes use of "add_signup_form_data_to_database" to submit the data into the database
- Add the "submit_register_form" to the API in main.py
- Add isEmulator logic from get_licensed page to be able to test this page locally using firebase emulator
- Test function locally
- Create function "retrieveExistingData" to prefill the form with details from get_scan form
- Create function "isFormAlreadyCompleted()" to redirect users directly to the next page
-->


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register for Eagle Eyes Scan SAR</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="custom-stylesheet" href="/css/form_buttons_and_boxes.css?t=[timestamp]">
    {% include form_styling.html %}
</head>

<body>   
    <section id="signin" style="display: flex; justify-content: center; align-items: center;" hidden>
        </br></br></br>
        {% include signinWidget.html %}
    </section>
    <section id="form-container" class="form-container" hidden>
        <h1 style="text-align: center;">Register for an Eagle Eyes Scan SAR license</h1>
        <p>Purchasing an Eagle Eyes Scan SAR license requires registration. Please complete this form to register your organisation. We will process new request within 3 business days. Upon approval, you will be able to purchase a license using the email address above.</p>
        {% include form.html form_type='register' %}
        <div id="additional-box-1" class="checkbox-container">
            <input type="checkbox" id="distribution_policy" name="distribution_policy" required>
            <label for="distribution_policy"><span class="checkbox-label required">I confirm that any licenses I may purchase in the future will be for internal use only and shall not be transferred, sold, or distributed outside of my organization.</span></label>
        </div>
        <div id="additional-box-2" class="checkbox-container">
            <input type="checkbox" id="SAR_only" name="SAR_only" required>
            <label for="SAR_only"><span class="checkbox-label required">I confirm that this software will be used for search and rescue purposes only.</span></label>
        </div>
        <div class="checkbox-container">
            <input type="checkbox" id="receive_communication" name="receive_communication" required>
            <label for="receive_communication"><span class="checkbox-label required">I agree to receive communications specific to my registration request and related product information.</span></label>
        </div>
        </br>
        <div id="submit-container">
            <button onclick="submitForm()" type="submit">Submit</button>
        </div>
    </section>
    </br>

    <section id="post-form" class="info-box" hidden> 
        <div id="checking-licenses-box" class="info-box" >Your registration request was submitted successfully. </br>We will process new requests and email you within 3 business days. </br>Please reach out to info@eagleeyessearch.com if you have any questions.</div>
    </section>

<script>

    var globalUser = null;

    var backUpLinkOrNull = null;
    console.log("Signin widget included");
    document.addEventListener('signInComplete', function (e) {
        /* Handle the event:
        CustomEvent('signInComplete', { detail: { user: user } })
        Generated by the signinWidget.html inclusion
        */
        globalUser = e.detail.user;
        console.log('signInComplete event received: ' + globalUser);

        // Send a request to the server to see if the user has already filled out the form. 
        // If they have not - show it, if they have, show a greeting message and the download link.
        hostURL = getHostUrl();
        var fetch_url = hostURL + '/has_user_already_filled_in_form';
        console.log("Checking URL: " + fetch_url);
        $("#hang-on-message").show();
        globalUser.getIdToken(true).then(function (idToken) {
            $.ajax({
                url: fetch_url,
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + idToken
                },
                success: function (data) {
                    $("#signin-explainer").hide();
                    console.log("Got reply from has_user_already_filled_in_form: " + data);
                    data = JSON.parse(data);
                    console.log(data);
                    formOrNull = data.form;
                    if (formOrNull === null) {
                        console.log('user did not fill in form yet');
                        $("#form-container").show();
                        $("#download-button-div").show();
                    } else {
                        populateForm(formOrNull);
                        $("#form-container").show();
                        $("#submit-container").show();
                    }
                },
                error: requestErrorHandler,
            });
        });
    });
    
    
    window.addEventListener('DOMContentLoaded', function () {
        /*

            Software version list-selection (list-selection that we populate in javascript)
        <label for="software_version"><b>Software version: </b></label>
        <select id="software_version" name="software_version" required>
            <option value="" disabled selected>Select software version</option>
        </select>
        <br />
        */
        windowsDefault = 'EagleEyesScanInstaller_0.5.1rc6_Windows_x86_64.exe';
        macDefault = 'EagleEyesScan_0.5.1rc6_MacOS_arm64.zip';
        var softwareVersions = [
            //'EagleEyesScan_0.4.3_MacOS_arm64.zip',
            // 'EagleEyesScan_0.5.0rc2_MacOS_arm64.zip',
            // 'EagleEyesScan_0.5.0rc3_MacOS_arm64.zip',
            // 'EagleEyesScan_0.5.0rc4_MacOS_arm64.zip',
            // 'EagleEyesScan_0.5.0rc5_MacOS_arm64.zip',
            'EagleEyesScan_0.5.0rc6_MacOS_x86_64.zip',
            // 'EagleEyesScan_0.5.0rc7_MacOS_arm64.zip',
            // 'EagleEyesScan_0.4.3_Windows_x64.zip',
            //'EagleEyesScan_0.4.5_Windows_x86_64.zip',
            // 'EagleEyesScan_0.5.0rc2_Windows_x86_64.zip',
            // 'EagleEyesScan_0.5.0rc3_Windows_x86_64.zip',
            // 'EagleEyesScan_0.5.0rc4_Windows_x86_64.zip',
            windowsDefault,
            macDefault,
        ];
        var selectElement = document.getElementById('software_version');
        var os = navigator.platform.toLowerCase();

        softwareVersions.forEach(function (version) {
            var optionElement = document.createElement('option');
            optionElement.value = version;
            optionElement.textContent = version;

            if (os.includes('mac') && (version === macDefault)) {
                optionElement.selected = true;
            } else if (os.includes('win') && (version === windowsDefault)) {
                optionElement.selected = true;
            }
            selectElement.appendChild(optionElement);
        });
    });

    function populateForm(formData) {
        // Get all form inputs
        var formInputs = document.querySelectorAll('input[type=text], input[type=password], input[type=checkbox], input[type=radio], select, textarea');
        
        // Iterate through each input in the form
        for (var i = 0; i < formInputs.length; i++) {
            var input = formInputs[i];

            // Check if the input's name exists in the formData
            if (formData.hasOwnProperty(input.name)) {
                if (input.type === 'checkbox' || input.type === 'radio') {
                    // Set the checked property based on formData
                    input.checked = formData[input.name];
                } else {
                    // Set the value property based on formData
                    input.value = formData[input.name];
                }
            }
        }
    }


</script>
    
</body>