---
layout: main
title: Solutions
permalink: /solutions/
---

<div class="content clearfix">
    <div class="section-block pt-70 pb-70">
        <div class="row">
            <div class="column width-12 solutions-container" style="margin-top: 3rem;">

                <div class="pricing-header">
                    <h2 style="margin-bottom: 10px; font-weight: 300; font-size: 2.8rem; color: #333; line-height: 1.2; text-align: center;">Eagle Eyes Solutions</h2>
                    <p style="text-align: center; max-width: 1000px; margin: 0 auto 3rem; color: #555; font-size: 1.8rem; line-height: 1.6; font-weight: 400;">Proven software for drones, computer vision imagery analysis, and situational awareness in public safety.</p>
                </div>
                
                <!-- Top Row - 3 core solutions (compact spacing) -->
                <div class="features-grid" style="margin-top: 0; margin-bottom: 30px; justify-items: center;">
                    <!-- Copy of Computer Vision feature -->
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-top-1')">
                            Eagle Eyes Computer Vision
                        </div>
                        <img src="{{ '/images/Eagle Eyes Desert Detection.png' | relative_url }}" alt="Eagle Eyes Computer Vision Detection" class="feature-image" onclick="openFeatureModal('feature-top-1')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-top-1" aria-hidden="true">
                            Advanced computer vision technology for real-time and post-mission detection of color and motion anomalies.
                            <div class="video-link" style="margin-top:8px;">
                                <a href="https://youtu.be/OGFzcnLp7oI" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">Eagle Eyes Computer Vision
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Connect Your Drone to Your Teams CalTopo Map -->
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-top-2')">
                            Connect Your Drone to Your Teams CalTopo Map
                        </div>
                        <img src="{{ '/images/Caltopo Drone Eagle Eyes Pilot.png' | relative_url }}" alt="Connect Your Drone to Your Teams CalTopo Map" class="feature-image" onclick="openFeatureModal('feature-top-2')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-top-2" aria-hidden="true">
                            Seamlessly connect your drone to your teams CalTopo map to share the drones live location, record GPS tracks of where the drone has been and add up to full resolution geolocated photo points to to the map in real-time while the drone is still in the air.
                            <div class="video-link" style="margin-top:8px;">
                                <a href="https://youtu.be/wyg47If033M" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">Caltopo Map Integration
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Airspace Deconfliction Map -->
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-top-3')" style="display: flex; flex-direction: column; align-items: center;">
                            <div>Airspace Deconfliction Map</div>
                            <div style="display: flex; gap: 8px; margin-top: 4px;">
                                <div class="early-release-badge" style="margin-left: 0 !important; margin-top: 0 !important; display: inline-block !important; text-align: center !important; pointer-events: none !important; width: auto !important; font-size: 0.75rem !important; padding: 0.25rem 0.5rem !important;">Beta</div>
                                <div class="free-feature-badge" style="margin-left: 0 !important; margin-top: 0 !important; display: inline-block !important; text-align: center !important; pointer-events: none !important; width: auto !important; font-size: 0.75rem !important; padding: 0.25rem 0.5rem !important;">Free Feature</div>
                            </div>
                        </div>
                        <img src="{{ '/images/V2 M3T and Mini 3 Airspace deconfliction (2).png' | relative_url }}" alt="Air Space Coordination Map" class="feature-image" onclick="openFeatureModal('feature-top-3')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-top-3" aria-hidden="true">
                            When connected to the same local Wi-Fi network as drone controllers broadcasting their locations to the Eagle Eyes AirOps map (location broadcast is possible while flying in either Eagle Eyes Pilot [Pro] or DJI Pilot 2), view the AirOps map on your android device and see near-zero latency live multi-drone positions overlaid on CalTopo map features.
                            <div class="video-link" style="margin-top:8px;">
                                <a href="https://youtu.be/__i8BL0HGOU&t=5s" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">See YouTube video description here
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Features Section (Second Row and beyond) -->
                <!-- Features wrapper for visual differentiation -->
                <div class="features-wrapper" style="margin-left:auto; margin-right:auto;">
                <h3 class="features-heading">Features</h3>
                <!-- First Row - 3 boxes wide -->
                <div class="features-grid" style="justify-items: center;">
                    
                    
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-7')">
                            Fly Your Drone with Eagle Eyes Pilot App
                        </div>
                        <img src="{{ '/images/EagleEyesPilotSnowyScreeController.png' | relative_url }}" alt="Eagle Eyes Pilot App" class="feature-image contain-fit" onclick="openFeatureModal('feature-7')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-7" aria-hidden="true">
                            Use Eagle Eyes Pilot as a complete piloting app with advanced flight controls and a map view that allows you to fly with reference to your CalTopo map.
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-5')">
                            Full Access to All Eagle Eyes Scan (Desktop App) Features
                        </div>
                        <img src="{{ '/images/EagleEyesScanSnowyScreeLaptop.png' | relative_url }}" alt="Eagle Eyes Scan Desktop App" class="feature-image" onclick="openFeatureModal('feature-5')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-5" aria-hidden="true" style="padding: 4px 8px; line-height: 1.3; margin-top: 0px;">
                            Access the full Eagle Eyes Scan feature set, including:<br>
                            – Real-time detection on live drone imagery via clean HDMI feed (compatible with any drone capable of HDMI output)<br>
                            – Real-time coordinate transmission from DJI drone controllers over local Wi-Fi networks to display drones live location on the Eagle Eyes Scan map (Eagle Eyes Pilot and DJI Pilot 2 are capable of outputting clean HDMI feed and transmitting coordinates over local Wi-Fi)<br>
                            – Post-mission computer vision analysis of still images and video files<br>
                            – Mosaic view for fast review of large image sets and videos, highlighting anomalies and geolocating detections (drone coordinates feature available for DJI and some Autel)<br>
                            – Export detections as geolocated photo points into CalTopo or other mapping tools
                            <div class="video-link" style="margin-top:4px;">
                                <a href="https://youtu.be/SoLpsUBJoVo" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">Analyzing large drone image sets with Eagle Eyes Scan
                                </a>
                            </div>
                            <div class="video-link" style="margin-top:4px;">
                                <a href="https://www.youtube.com/watch?v=cwZ4tvBRdjA&t=2s" target="_blank" rel="noopener" style="display: block; max-width: 100%; word-wrap: break-word;">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">See YouTube video showing how the drone controller (Eagle Eyes Pilot or DJI Pilot 2) connects to Eagle Eyes Scan on a laptop for real-time computer vision with coordinates.
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    
                    <!-- Additional Pro Features -->
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-3')">
                            Add Full Resolution Geolocated Photo Points to Caltopo While Your Drone is in the Air
                        </div>
                        <img src="/images/Laser range finder photo point in EE Pilot (3).png" alt="Photo Points to Caltopo" class="feature-image" onclick="openFeatureModal('feature-3')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-3" aria-hidden="true">
                            Instantly capture and geolocate high-resolution photos during flight operations.
                            <div class="video-link" style="margin-top:8px;">
                                <a href="https://youtu.be/v2Y3dAhz6m8" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">Add Full-Res Photo Points to Caltopo
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-9')">
                            Live track your drones GPS location in your CalTopo Map
                        </div>
                        <img src="{{ '/images/Live track your drone in CalTopo while flying in DJI Pilot 2.png' | relative_url }}" alt="Live GPS Tracking in CalTopo" class="feature-image" onclick="openFeatureModal('feature-9')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-9" aria-hidden="true">
                            Stream your drone's live GPS location and GPS tracks directly into CalTopo while flying in either Eagle Eyes Pilot or DJI Pilot 2.<br><br>
                            <div class="video-link" style="margin-top:8px;">
                                <a href="https://www.youtube.com/watch?v=wyg47If033M" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">Live tracking your drones GPS location into CalTopo from Eagle Eyes Pilot
                                </a>
                            </div>
                            <div class="video-link" style="margin-top:8px;">
                                <a href="https://www.youtube.com/watch?v=gos2qwe04_Q" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">Live tracking your drones GPS location into CalTopo from DJI Pilot 2
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    
                    <!-- Free Features from Pricing Table -->
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-12')" style="display: flex; flex-direction: column; align-items: center;">
                            <div>Upload Post Flight Offline Drone GPS Tracks to CalTopo</div>
                            <div class="free-feature-badge" style="margin-left: 0 !important; margin-top: 4px !important; display: block !important; text-align: center !important; pointer-events: none !important; width: auto !important; font-size: 0.75rem !important; padding: 0.25rem 0.5rem !important;">Free Feature</div>
                        </div>
                        <img src="{{ '/images/Upload your drones offline GPS track to Caltopo .png' | relative_url }}" alt="Upload GPS Tracks to CalTopo" class="feature-image" onclick="openFeatureModal('feature-12')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-12" aria-hidden="true">
                            Fly online or offline in Eagle Eyes Pilot [Pro] or DJI Pilot 2, then quickly upload your drone's GPS tracks to CalTopo once you're back in service.<br><br>
                            <div class="video-link" style="margin-top:8px;">
                                <a href="https://www.youtube.com/watch?v=kL0-SSLd23c" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">See YouTube video description here
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-title" onclick="openFeatureModal('feature-13')" style="display: flex; flex-direction: column; align-items: center;">
                            <div>Convert CalTopo Search Areas into DJI Flight Mission Plans</div>
                            <div class="free-feature-badge" style="margin-left: 0 !important; margin-top: 4px !important; display: block !important; text-align: center !important; pointer-events: none !important; width: auto !important; font-size: 0.75rem !important; padding: 0.25rem 0.5rem !important;">Free Feature</div>
                        </div>
                        <img src="{{ '/images/Turn your CalTopo Search area into a drone flight mission for DJI Pilot 2.png' | relative_url }}" alt="Convert CalTopo Search Areas to DJI Mission Plans" class="feature-image" onclick="openFeatureModal('feature-13')" style="cursor: pointer;">
                        <div class="feature-dropdown" id="feature-13" aria-hidden="true">
                            Easily turn CalTopo search areas into KML files and import them into DJI Pilot 2 as ready-to-fly mission plans.<br><br>
                            <div class="video-link" style="margin-top:8px;">
                                <a href="https://www.youtube.com/watch?v=0i_ph36RUqE" target="_blank" rel="noopener">
                                    <img src="{{ '/images/YoutubeLogo.png' | relative_url }}" alt="YouTube" style="height:18px; width:auto; vertical-align:middle; margin-right:6px;">See YouTube video description here
                                </a>
                            </div>
                        </div>
                    </div>
                    
                </div>
                </div>
                
                <div class="cta-section">
                    <h3>Ready to Get Started?</h3>
                    <p>Try out Eagle Eyes today - Download for free and access free features or Sign up for a 30-day free trial to test the Pro features</p>
                    <a href="/pricing/" class="btn btn-primary">View Pricing Plans</a>
                    <a href="/download/" class="btn btn-secondary">Download Now</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Wide layout for desktop */
@media (min-width: 1280px) {
    .solutions-container {
        max-width: 99vw; /* expand page content further */
        margin-left: auto !important;
        margin-right: auto !important;
    }
    .features-grid {
        max-width: 99vw; /* expand grids */
        gap: 28px; /* smaller gap to give cards more width */
    }
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 36px;
    margin-bottom: 44px;
    max-width: 1600px;
    margin-left: auto;
    margin-right: auto;
}

/* Black placeholder for livestream card */
.placeholder-box {
    width: 100%;
    aspect-ratio: 16 / 9;
    background: #000;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 800;
    letter-spacing: 1px;
    border-radius: 8px;
    text-transform: uppercase;
}

/* Features wrapper and heading */
.features-wrapper {
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 24px 24px 10px;
    background: #ffffff; /* cleaner professional look */
    box-shadow: 0 1px 2px rgba(16, 24, 40, 0.06);
}
.features-heading {
    margin: 0 0 16px;
    text-align: center;
    font-weight: 700;
    color: #333; /* revert to original heading color */
}

.feature-card {
    text-align: center;
    transition: all 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-2px);
}

.feature-title {
    font-size: 1.4rem;
    font-weight: 600;
    color: #333;
    margin-bottom: 15px;
    cursor: pointer;
    padding: 15px 15px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 1px solid #dee2e6;
    border-radius: 8px;
    transition: all 0.3s ease;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    height: 90px;
    width: 100%;
    max-width: 100%;
    order: 1;
}

.feature-title:hover {
    background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
    border-color: #007bff;
    box-shadow: 0 4px 12px rgba(0,123,255,0.15);
    transform: translateY(-1px);
}

.feature-title:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(0,123,255,0.2);
}

.feature-dropdown {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
    font-size: 1.3rem;
    color: #555;
    line-height: 1.6;
    text-align: center;
    padding: 0 15px;
    margin-bottom: 15px;
    font-weight: 400;
    order: 2;
    display: none;
}

.feature-dropdown.active {
    max-height: 420px;
    padding-top: 15px;
    padding-bottom: 15px;
    display: block;
}

.feature-image {
    width: 100%;
    height: auto;
    aspect-ratio: 16 / 9;
    object-fit: cover;
    border-radius: 8px;
    transition: transform 0.3s ease;
    display: block;
    margin-top: 0;
    margin-bottom: 0;
    order: 3;
}

.feature-card:hover .feature-image {
    transform: scale(1.02);
}

/* For images that should not crop content */
.contain-fit {
    object-fit: contain;
    background: #000;
}

.caltopo-image-wrapper {
    background-color: #000;
    width: 100%;
    aspect-ratio: 16 / 9;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    margin-top: 0;
    margin-bottom: 0;
    overflow: hidden;
    order: 3;
}

.caltopo-image-wrapper .feature-image {
    height: 100%;
    width: auto;
    object-fit: contain;
    margin-bottom: 0;
    margin-top: 0;
}

.cta-section {
    text-align: center;
    margin-top: 50px;
    padding: 40px;
    background: #f8f9fa;
    border-radius: 12px;
    border: 1px solid #e9ecef;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}

.cta-section h3 {
    color: #333;
    margin-bottom: 20px;
    font-size: 24px;
}

.cta-section p {
    color: #666;
    margin-bottom: 30px;
    font-size: 16px;
    line-height: 1.6;
}

.btn {
    display: inline-block;
    padding: 14px 28px;
    margin: 0 15px;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    font-size: 16px;
}

.btn-primary {
    background-color: #007bff;
    color: white;
}

.btn-primary:hover {
    background-color: #0056b3;
    color: white;
    text-decoration: none;
    transform: translateY(-2px);
}

.btn-secondary {
    background-color: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background-color: #545b62;
    color: white;
    text-decoration: none;
    transform: translateY(-2px);
}

/* Tablet and smaller desktop */
@media (max-width: 1200px) {
    .features-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
        max-width: 1000px;
    }
}

@media (max-width: 768px) {
    .features-grid {
        grid-template-columns: 1fr;
        gap: 20px;
        padding: 0 20px;
    }
    
    .feature-card {
        padding: 20px;
    }
    
    .feature-title {
        font-size: 15px;
        padding: 0 5px;
    }
    .feature-image,
    .caltopo-image-wrapper,
    .placeholder-box {
        aspect-ratio: 16 / 9;
    }
    
    .btn {
        display: block;
        margin: 15px auto;
        text-align: center;
        max-width: 200px;
    }
    
    .cta-section {
        margin: 40px 20px;
        padding: 30px 20px;
    }
}

@media (max-width: 480px) {
    .features-grid {
        padding: 0 15px;
    }
    
    .feature-card {
        padding: 15px;
    }
    
    .feature-title {
        font-size: 14px;
    }
    
    .cta-section {
        margin: 30px 15px;
        padding: 25px 15px;
    }
}
</style>

<style>
/* Modal styles for zoomed feature view */
.feature-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
}

.feature-modal-content {
    background-color: white;
    border-radius: 12px;
    width: 80vw;
    max-width: 1000px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: modalSlideIn 0.3s ease-out;
    display: flex;
    flex-direction: column;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.feature-modal-close {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 28px;
    font-weight: bold;
    color: #aaa;
    cursor: pointer;
    z-index: 1001;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.feature-modal-close:hover {
    color: #000;
    background: rgba(255, 255, 255, 1);
    transform: scale(1.1);
}

.feature-modal-image {
    width: 100%;
    max-height: 50vh;
    object-fit: contain;
    border-radius: 12px 12px 0 0;
    display: block;
    background-color: #fff;
    margin: 0;
    padding: 0;
}

.feature-modal-text {
    padding: 30px 30px 30px 30px;
    font-size: 1.4rem;
    line-height: 1.6;
    color: #555;
}

.feature-modal-text .video-link {
    margin-top: 20px;
    margin-bottom: 0;
    padding: 0;
}

.feature-modal-text .video-link a {
    color: #007bff;
    text-decoration: none;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    white-space: nowrap; /* Prevent text wrapping */
}

.feature-modal-text .video-link a:hover {
    text-decoration: underline;
}

.feature-modal-text .video-link img {
    height: 28px !important;
    width: auto !important;
    vertical-align: middle !important;
    margin-right: 6px !important;
    display: inline-block !important;
    padding: 8px 0 !important;
    margin-top: 8px !important;
    margin-bottom: 8px !important;
}


/* Early release badge styling */
.early-release-badge {
    display: inline-block;
    background: #fd7e14;
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    margin-left: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    vertical-align: middle;
}

/* Free feature badge styling */
.free-feature-badge {
    display: inline-block;
    background: #28a745;
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    margin-left: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    vertical-align: middle;
}

/* Force all modal images to be consistent */
.feature-modal img {
    width: 100% !important;
    max-height: 60vh !important;
    object-fit: contain !important;
    background-color: #fff !important;
    border-radius: 12px 12px 0 0 !important;
    display: block !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Add black borders to specific images that need them */
.feature-modal img[alt*="Connect Your Drone to Your Teams CalTopo Map"],
.feature-modal img[alt*="Caltopo Map Integration"],
.feature-modal img[alt*="Air Space Coordination Map"],
.feature-modal img[alt*="Air Ops Map View"] {
    background-color: #000 !important;
    border: 2px solid #000 !important;
}

/* Make feature cards clickable */
.feature-card {
    cursor: pointer;
}

.feature-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

/* Hide regular dropdowns when modal is open */
body.modal-open .feature-dropdown {
    display: none !important;
}

/* Video modal styles */
.video-modal {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(5px);
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
}

.video-modal-content {
    background-color: #000;
    border-radius: 12px;
    width: 80vw;
    max-width: 1200px;
    max-height: 90vh;
    position: relative;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    animation: videoModalSlideIn 0.3s ease-out;
}

@keyframes videoModalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.video-modal-close {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 28px;
    font-weight: bold;
    color: #fff;
    cursor: pointer;
    z-index: 1002;
    background: rgba(0, 0, 0, 0.8);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    border: 2px solid #fff;
    pointer-events: auto;
}

.video-modal-close:hover {
    background: rgba(255, 255, 255, 0.9);
    color: #000;
    transform: scale(1.1);
}

.video-modal-iframe {
    width: 100%;
    height: 0;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    position: relative;
    border: none;
    border-radius: 12px;
    background: #000;
}

.video-modal-iframe iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    border-radius: 12px;
    pointer-events: auto;
    z-index: 1;
}

.video-modal-title {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    color: white;
    padding: 20px;
    font-size: 1.2rem;
    font-weight: 600;
    text-align: center;
    pointer-events: none;
    z-index: 0;
}

/* Responsive video modal */
@media (max-width: 768px) {
    .video-modal-content {
        width: 95vw;
        max-width: none;
        max-height: 95vh;
    }
    
    .video-modal-iframe {
        padding-bottom: 56.25%; /* Maintain 16:9 aspect ratio on mobile */
    }
}
</style>

<script>
function toggleFeatureDropdown(featureId) {
    const dropdown = document.getElementById(featureId);
    const isVisible = dropdown.classList.contains('active');
    
    // If clicking the same open dropdown, close it (true toggle)
    if (isVisible) {
        dropdown.classList.remove('active');
        dropdown.setAttribute('aria-hidden', 'true');
        updateURL(null); // Remove feature from URL
        return;
    }
    // Close all others, then open requested
    document.querySelectorAll('.feature-dropdown.active').forEach(el => {
        el.classList.remove('active');
        el.setAttribute('aria-hidden', 'true');
    });
    dropdown.classList.add('active');
    dropdown.setAttribute('aria-hidden', 'false');
    updateURL(featureId); // Add feature to URL
}

// Mapping of feature IDs to descriptive URL names
const featureUrlNames = {
    'feature-top-1': 'eagle-eyes-computer-vision',
    'feature-top-2': 'connect-drone-to-caltopo',
    'feature-top-3': 'airspace-coordination',
    'feature-3': 'photo-points-caltopo',
    'feature-5': 'eagle-eyes-scan-desktop',
    'feature-7': 'eagle-eyes-pilot-app',
    'feature-9': 'live-gps-tracking',
    'feature-12': 'upload-gps-tracks',
    'feature-13': 'mission-plans'
};

// Reverse mapping for URL names to feature IDs
const urlNameToFeatureId = {};
Object.keys(featureUrlNames).forEach(id => {
    urlNameToFeatureId[featureUrlNames[id]] = id;
});

function updateURL(featureId) {
    const url = new URL(window.location);
    if (featureId) {
        const urlName = featureUrlNames[featureId];
        if (urlName) {
            url.searchParams.set('feature', urlName);
        }
    } else {
        url.searchParams.delete('feature');
    }
    window.history.pushState({}, '', url);
}

function openFeatureFromURL() {
    const urlParams = new URLSearchParams(window.location.search);
    const urlName = urlParams.get('feature');
    if (urlName) {
        const featureId = urlNameToFeatureId[urlName];
        if (featureId) {
            // Open the modal instead of just the dropdown
            openFeatureModal(featureId);
        }
    }
}

function openFeatureModal(featureId) {
    const dropdown = document.getElementById(featureId);
    const card = dropdown.closest('.feature-card');
    const titleElement = card.querySelector('.feature-title');
    const title = titleElement.textContent.trim().split('\n')[0].trim();
    const image = card.querySelector('img');
    const description = dropdown.innerHTML;
    
    // Check if there's a BETA badge or Free Feature badge in the title
    const betaBadge = titleElement.querySelector('.early-release-badge');
    const freeFeatureBadge = titleElement.querySelector('.free-feature-badge');
    
    let titleWithBadge = title;
    if (betaBadge && freeFeatureBadge) {
        titleWithBadge = `${title}<br><div style="display: flex; gap: 8px; margin-top: 4px; justify-content: center;"><div class="early-release-badge" style="margin-left: 0; margin-top: 0; display: inline-block; text-align: center;">Beta</div><div class="free-feature-badge" style="margin-left: 0; margin-top: 0; display: inline-block; text-align: center;">Free Feature</div></div>`;
    } else if (betaBadge) {
        titleWithBadge = `${title}<br><div class="early-release-badge" style="margin-left: 0; margin-top: 4px; display: block; text-align: center;">Beta</div>`;
    } else if (freeFeatureBadge) {
        titleWithBadge = `${title}<br><div class="free-feature-badge" style="margin-left: 0; margin-top: 4px; display: block; text-align: center;">Free Feature</div>`;
    }
    
    // Create modal content
    const modal = document.getElementById('featureModal');
    const modalContent = modal.querySelector('.feature-modal-content');
    
    modalContent.innerHTML = `
        <span class="feature-modal-close">&times;</span>
        <img src="${image.src}" alt="${image.alt}" class="feature-modal-image">
        <div class="feature-modal-text">
            <h3 style="margin: 0 0 20px 0; color: #333; font-size: 1.8rem; display: flex; align-items: center; gap: 10px;">${titleWithBadge}</h3>
            ${description}
        </div>
    `;
    
    // Show modal
    modal.style.display = 'flex';
    document.body.classList.add('modal-open');
    
    // Update URL with feature parameter
    updateURL(featureId);
    
    // Add close event listeners
    const closeBtn = modalContent.querySelector('.feature-modal-close');
    closeBtn.onclick = closeFeatureModal;
    
    // Close on background click
    modal.onclick = function(e) {
        if (e.target === modal) {
            closeFeatureModal();
        }
    };
    
    // Close on escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeFeatureModal();
        }
    });
}

function closeFeatureModal() {
    const modal = document.getElementById('featureModal');
    modal.style.display = 'none';
    document.body.classList.remove('modal-open');
    
    // Clear feature parameter from URL
    updateURL(null);
}

function openVideoModal(videoUrl, videoTitle) {
    // Extract video ID from YouTube URL
    const videoId = extractVideoId(videoUrl);
    if (!videoId) {
        // If we can't extract video ID, open in new tab as fallback
        window.open(videoUrl, '_blank');
        return;
    }
    
    // Create embedded YouTube URL
    const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1`;
    
    // Create modal content
    const modal = document.getElementById('videoModal');
    const modalContent = modal.querySelector('.video-modal-content');
    
    modalContent.innerHTML = `
        <span class="video-modal-close">&times;</span>
        <div class="video-modal-iframe">
            <iframe src="${embedUrl}" allowfullscreen></iframe>
        </div>
        <div class="video-modal-title">${videoTitle}</div>
    `;
    
    // Show modal
    modal.style.display = 'flex';
    document.body.classList.add('modal-open');
    
    // Add close event listeners
    const closeBtn = modalContent.querySelector('.video-modal-close');
    closeBtn.onclick = closeVideoModal;
    
    // Close on background click
    modal.onclick = function(e) {
        if (e.target === modal) {
            closeVideoModal();
        }
    };
    
    // Close on escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeVideoModal();
        }
    });
}

function closeVideoModal() {
    const modal = document.getElementById('videoModal');
    modal.style.display = 'none';
    document.body.classList.remove('modal-open');
    
    // Stop video by removing iframe src
    const iframe = modal.querySelector('iframe');
    if (iframe) {
        iframe.src = '';
    }
}

function extractVideoId(url) {
    const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
    const match = url.match(regExp);
    return (match && match[2].length === 11) ? match[2] : null;
}

// Handle YouTube video links specifically
document.addEventListener('click', function(e) {
    const clickedLink = e.target.closest('a');
    
    // Handle YouTube video links
    if (clickedLink && clickedLink.href && (clickedLink.href.includes('youtube.com') || clickedLink.href.includes('youtu.be'))) {
        e.preventDefault();
        e.stopPropagation();
        const videoTitle = clickedLink.textContent.trim() || 'Eagle Eyes Video';
        openVideoModal(clickedLink.href, videoTitle);
        return;
    }
});


// Initialize page - check for feature parameter in URL
document.addEventListener('DOMContentLoaded', function() {
    openFeatureFromURL();
});
</script>

<!-- Feature Modal -->
<div id="featureModal" class="feature-modal">
    <div class="feature-modal-content">
        <!-- Content will be dynamically inserted here -->
    </div>
</div>

<!-- Video Modal -->
<div id="videoModal" class="video-modal">
    <div class="video-modal-content">
        <!-- Video content will be dynamically inserted here -->
    </div>
</div>